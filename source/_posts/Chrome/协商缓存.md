---
title: 协商缓存
date: 2024-05-07 11:23:11
categories: 经验帖
tags:
    - Chrome
summary:
---

## HTTP缓存 协商缓存 强缓存 弱缓存 CDN

配置超长时间的本地缓存                 —— 节省带宽，提高性能
采用内容摘要作为缓存更新依据            —— 精确的缓存控制
静态资源CDN部署                      —— 优化网络请求
更新资源发布路径实现非覆盖式发布        —— 平滑升级


[大公司里怎样开发和部署前端代码？张云龙](https://www.zhihu.com/question/20790576)

1. 协商缓存: 设置status 304, 依旧要和服务器通讯一次

2. 强缓存: 设置 cache-control/expires + 更新引用资源路径

> `href="a.css?v=ds151d"` `href="a.css?v=1.0.1"`
> v不使用版本号，而使用根据文件内容生成的哈希值，因为版本号会更新所有文件引用路径，内容哈希值只影响当前文件。

3. 静态资源和动态网页分集群部署，静态资源会被部署到CDN节点上，网页中引用的资源也会变成对应的部署路径

`href="http://static.xxx.com/a.css?v=ds151d"`